# Etherlite

Etherlite is a 

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'etherlite'
```

And then execute:

    $ bundle

Initialize the configuration file and `contracts` folder:

    $ rails g etherlite:init

A `etherlite.yml` file will be added to your app's `config` folder, there you can configure the node locations and some other variables for each enviroment.

## Usage

This gem is intended to be used with contract artifacts generated by Truffle. To start interacting with your contracts, drop the artifacts for the contracts you will be using in the application `contracts` folder. (You can find the contract artifacts on the `build/contracts` folder of your truffle proyect).

Rails will automatically load the artifacts as ruby classes.

For example, given the following contract:

```solidity
contract BikeStore {
  event BikeSold(address buyer, string model);
  event BikeReturned(address buyer, string reason);

  function buyBike(string _model) payable {
    // some code
  }

  function getBikePrice(string _model) returns (uint price) {
    return _return;
  }
}
```

By copying the contract's artifact file in the `contracts` folder you will be able to call:

```ruby
my_store = BikeStoreContract.at('0xAAAAAAAAAAAAAAAAA') # notice the "Contract" sufix
price = my_store.get_bike_price
```

### Accounts

Etherlite supports both node managed accounts and private key accounts (via the `eth` gem).

By default etherlite will try to use the first account from the configured node.

```ruby
Etherlite.default_account # this should reference the node's first account (if present)
```

When executing operations that need to send a transaction you will need to provide the account's passphrase. You can set the `passphrase` option in the configuration file:

```yml
development:
  passphrase: <%= ENV['STORE_PASSPHRASE'] %>
```

or pass it on any transaction-triggering call:

```ruby
my_store.buy_bike('mongoose', passphrase: 'verysecure')
```

If you need to use a private key account, then set the `private_key` option in the configuration file with the account's private key. Etherlite will automatically switch to using a private key account instead of the node account:

```yml
development:
  private_key: <%= ENV['STORE_PRIVATE_KEY'] %>
```

```ruby
Etherlite.default_account.address # this should return the private_key corresponding address
```

If you wish to programatically load a private key account you can call:

```ruby
account = Etherlite.account_from_pk(your_private_key)
```

### Creating contract instances



### Calling contract methods



#### Setting gas limit and price



### Transferring ether



### Waiting for transactions



### Searching event logs

### Testing with Etherlite, rspec and testrpc

Etherlite (will) provides a set of rspec helpers to make

## Development

After checking out the repo, run `bin/setup` to install dependencies. Then, run `rake spec` to run the tests. You can also run `bin/console` for an interactive prompt that will allow you to experiment.

To install this gem onto your local machine, run `bundle exec rake install`. To release a new version, update the version number in `version.rb`, and then run `bundle exec rake release`, which will create a git tag for the version, push git commits and tags, and push the `.gem` file to [rubygems.org](https://rubygems.org).

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/[USERNAME]/etherlite. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the [Contributor Covenant](http://contributor-covenant.org) code of conduct.

## License

The gem is available as open source under the terms of the [MIT License](http://opensource.org/licenses/MIT).

